<html>
<head>
<meta charset="UTF-8">
<title>Defiant Lee: A Naive Bayes Twitter Bot</title>
<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,100italic,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
<link href="../css/style.css" rel="stylesheet" type="text/css">
<link rel="icon" type="image/png" href="http://tylerkrupicka.com/images/favicon.png">

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-51635607-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
 </script>

</head>

<body>

<div id="page-wrap-all">
  <div id="spacer"></div>
  
  <div id="content">
   <h2>Defiant Lee: A Naive Bayes Twitter Bot</h2>
    <div id="date">written 2014-09-27</div>
    <p>In the last week a friend pointed out how common it is for people to mistype "definitely" as "defiantly" on twitter, often because of autocorrect. I decided to try using the tweepy twitter library for python to create a twitter bot that responds to people when they make the mistake.</p><p><a href="https://github.com/tylerkrupicka/DefiantLee">On Github</a> | <a href="https://twitter.com/DefiantLee_/with_replies">Twitter</a></p><!-- more --><img id="postimg" src="http://tylerkrupicka.com/assets/defiant/poll.jpg" alt="polling"><h2>Starting Out</h2><p>To start out, I created a simple function using the api.search() tweepy client to respond to a tweet using defiantly every two minutes. This initial program was very naive, because it automatically assumed that tweets with the word defiantly were using it wrong. Surprisingly, a vast majority of the tweets that it responded to actually did misuse the word.</p><img id="postimg" src="http://tylerkrupicka.com/assets/defiant/bestbuy.jpg" alt="bestbuy"><h2>Removing Retweets</h2><p>After letting the bot run for a while, I quickly realized that the bot shouldn't be able to respond to retweets. When it responded to them, the user was often confused because they personally did not misuse defiantly and there is no context for the response. Additionally, the retweet responses do not show up as a conversation, making it even more confusing.</p><p>To remedy the retweet problem, the program uses the hasattr() python function to check if the tweet has the "retweeted_status" attribute. If it has this attribute the tweet is a retweet and can then be discarded during polling.</p><h2>Creating a Corpus</h2><p>In order to do any real thinking before choosing tweets, I needed a corpus of correct and incorrect uses to create a machine learning classifier. Over the course of five days, I had the bot save tweets that it responded to so that I could annotate them and create a usable courses. Over that time period it saved 1,600 tweets, a vast majority of which were incorrect uses.</p><img id="postimg" src="http://tylerkrupicka.com/assets/defiant/corpus.jpg" alt="corpus"><h2>Generating Features</h2><p>I decided when creating a feature set to look primarily at the words immediately before and after defiantly. After testing a variety of different features for correctness in classifying, I found the most deterministic to be:<br /><br />1. The words used immediately before and after defiantly.<br />2. The last letter of the word immediately before and after.<br />3. The part of speech of the word before and after.<br /><br />For part of speech tagging, I used the NLTK Maxent part of speech tagger to label the words in each tweet.</p><h2>The Classifier</h2><p>After features were generated for every tweet in the corpus, I could then create and train a NLTK Naive Bayes classifier. I load each of the tweets in the correct and incorrect usage corpus and then use the classifier to classify future incoming tweets. This allows the program to only respond to tweets that it actually determines are incorrect. It's still not perfect, but it is very good at finding incorrect usage. Additionally, the classifier will get more and more accurate based on the constantly increasing data set.</p><img id="postimg" src="http://tylerkrupicka.com/assets/defiant/british.jpg" alt="britishairlines"><h2>Update: A Good Run</h2><p>A couple weeks (and about 12,000) tweets later, the bot's api key finally got taken away--pretty unsurprisingly. Twitter has gotten very strict on their rules and regulations regarding automation, which now prohibits interacting with users without their explicit permission. Bots like mine and the infamous <a href="https://twitter.com/StealthMountain">Stealth Mountain</a> don't fit in to these new restrictions, so it was only a matter of time before the key was removed.</p><p>@BestBuySupport will just have to start proofreading.</p><img id="postimg" src="http://tylerkrupicka.com/assets/defiant/bestbuy2.jpg" alt="best buy mistake again">
    <div id="allposts"><a href="http://tylerkrupicka.com">Home</a></div> 
  </div>
</div>
<div id="footer">
<span style="max-width:480px;" >
		<a href="http://www.github.com/tylerkrupicka"><img src="http://tylerkrupicka.com/images/icons/github_round.png" alt="github"  id="footericon"/></a>
		<a href="http://thingiverse.com/tylerkrupicka"><img src="http://tylerkrupicka.com/images/icons/thingiverse_round.png" alt="thingiverse" id="footericon"/></a>
        <a href="mailto:tyler.krupicka13@gmail.com"><img src="http://tylerkrupicka.com/images/icons/email_round.png" alt="email" id="footericon"/></a>
        <a href="http://tylerkrupicka.com/assets/resume.pdf"><img src="http://tylerkrupicka.com/images/icons/resume_round.png" alt="resume" id="footericon"/></a>
        <a href="http://www.linkedin.com/pub/tyler-krupicka/a4/a66/380"><img src="http://tylerkrupicka.com/images/icons/linkedin_round.png" alt="linkedin" id="footericon"/></a>
 		<a href="http://twitter.com/tkrupicka"><img src="http://tylerkrupicka.com/images/icons/twitter_round.png"alt="twitter" id="footericon"/></a>
</span>
<br />
<span style="color:#AFAFAF;">&copy; Tyler Krupicka 2014</span></div>
</body>
</html>